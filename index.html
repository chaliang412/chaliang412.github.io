<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>我的主页</title>
        <!-- 引入外部CSS文件 -->
    <link rel="stylesheet" href="css/style.css">
    <!-- 预加载音频 -->
    <link rel="preload" href="music/知更鸟,HOYO-MiX,Chevy - 使一颗心免于哀伤（安可）If I Can Stop One Heart From Breaking (Encore).mp3" as="audio" type="audio/mpeg">
</head>
    <!-- MathJax配置 -->
    <script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
  },
  svg: {
    fontCache: 'global'
  },
  options: {
    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
  // 删除startup.typeset: false，默认自动渲染
};
</script>
<!-- 使用defer加载，确保顺序且不阻塞 -->
<script src="https://cdn.bootcdn.net/ajax/libs/mathjax/3.2.2/es5/tex-svg.min.js" defer></script>
  </head>
  <body>
    <!-- 音频播放器 -->
    <audio id="bgm" loop style="display: none;">
        <source src="music/知更鸟,HOYO-MiX,Chevy - 使一颗心免于哀伤（安可）If I Can Stop One Heart From Breaking (Encore).mp3" type="audio/mpeg">
        您的浏览器不支持音频元素。
    </audio>
    
    <!-- 音乐控制界面 -->
    <div class="music-player">
        <div class="player-main">
            <button id="toggleMusic" class="music-toggle">
                <span class="play-icon">▶️</span>
                <span class="pause-icon">⏸️</span>
            </button>
            <div class="music-info">
                <div class="music-title">背景音乐</div>
                <div class="volume-control">
                    <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.5">
                </div>
            </div>
        </div>
    </div>
    <!-- 导航栏 -->
    <nav class="navbar">
      <div class="nav-container">
        <a href="#" class="nav-logo">『茶凉凉凉凉丶』的主页</a>
        <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
        <ul class="nav-menu" id="navMenu">
          <li class="nav-item"><a href="#about" class="nav-link">关于我</a></li>
          <li class="nav-item">
            <a href="#research" class="nav-link">研究方向</a>
          </li>
          <li class="nav-item">
            <a href="#projects" class="nav-link">业余爱好</a>
          </li>
          <li class="nav-item">
            <a href="#publications" class="nav-link">掌握的技能</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <!-- 关于我 -->
      <section id="about" class="card">
        <h2 class="card-title">关于我</h2>
        <div class="avatar-container">
          <img src="images/星尘.webp" alt="我的头像" class="avatar" />
        </div>
        <p>大家好，我是『茶凉凉凉凉丶』，你可以简称我为『茶凉』或者『凉茶』，是一位数学/物理学爱好者，同时也是百度数学吧的吧务，很高兴见到你！也希望我的作品可以给你带来帮助！</p>
      </section>

      <!-- 研究方向 -->
      <section id="research" class="card">
        <h2 class="card-title">研究方向</h2>
        <p>
          我的主要研究方向包括深度学习理论、优化算法和数学建模。以下是一些我正在研究的数学公式：
        </p>

        <p>神经网络的前向传播公式：</p>
        <p>\[ z^{(l)} = W^{(l)}a^{(l-1)} + b^{(l)} \]</p>
        <p>\[ a^{(l)} = \sigma(z^{(l)}) \]</p>

        <p>损失函数的梯度下降更新规则：</p>
        <p>\[ \theta_{t+1} = \theta_t - \eta \nabla_\theta J(\theta_t) \]</p>

        <p>我正在研究的优化问题：</p>
        <p>
          \[ \min_{x \in \mathbb{R}^n} f(x) \quad \text{s.t.} \quad g_i(x) \leq
          0, i = 1, \ldots, m \]
        </p>
      </section>

      <!-- 项目 -->
      <section id="projects" class="card">
        <h2 class="card-title">业余爱好</h2>
        <div class="project">
          <ol>
          <li>
           中文VOCALOID，如乐(yuè)正绫与星尘
          </li>
          <li>
          单机游戏，如Galgame</li>
          <li>
            观看虚拟主播，如绊爱</li>
        </ol>

        </div>
      </section>

      <!-- 发表论文 -->
      <section id="publications" class="card">
        <h2 class="card-title">掌握的技能</h2>
        <ul>
          <li>
           $\LaTeX$
          </li>
          <li>Mathematica</li>
          <li>
            MATLAB
          </li>
          <li>Python</li>
        </ul>
      </section>

      <div class="simple-contact">
        <div class="contact-title">联系我</div>
        
        <div class="contact-line">
            <div class="contact-icon">📱</div>
            <div class="contact-text">QQ: 3339829816</div>
        </div>
        
        <div class="contact-line">
            <div class="contact-icon">✉️</div>
            <div class="contact-text">邮箱: yuezhengaoe@foxmail.com</div>
        </div>
        
        <div class="contact-line">
            <div class="contact-icon">📖</div>
            <div class="contact-text">
                知乎: <a href="https://www.zhihu.com/people/onlybai-cai" class="contact-link" target="_blank">我的知乎主页</a>
            </div>
        </div>
    </div>

    <!-- 夜间模式切换按钮 -->
    <div class="toggle-container">
      <button id="darkModeToggle" class="toggle-btn">
        <svg
          class="icon"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M12 2V4"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M12 20V22"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M4.92993 4.92993L6.33999 6.33999"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M17.6599 17.6599L19.0699 19.0699"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M2 12H4"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M20 12H22"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M6.33999 17.6599L4.92993 19.0699"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M19.0699 4.92993L17.6599 6.33999"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        夜间模式
      </button>
    </div>

    <!-- 返回顶部按钮 -->
    <button id="backToTop" class="back-to-top" aria-label="返回顶部">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5 15l7-7 7 7"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>

    <script>
      // 移动菜单切换
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");
      const navMenu = document.getElementById("navMenu");

      mobileMenuBtn.addEventListener("click", () => {
        navMenu.classList.toggle("active");
      });

      // 夜间模式切换
      const darkModeToggle = document.getElementById("darkModeToggle");
      const prefersDarkScheme = window.matchMedia(
        "(prefers-color-scheme: dark)"
      );
      const currentTheme = localStorage.getItem("theme");

      if (
        currentTheme === "dark" ||
        (!currentTheme && prefersDarkScheme.matches)
      ) {
        document.body.classList.add("dark-mode");
        updateButtonText(true);
      }

      darkModeToggle.addEventListener("click", () => {
        const isDark = document.body.classList.toggle("dark-mode");
        localStorage.setItem("theme", isDark ? "dark" : "light");
        updateButtonText(isDark);
      });

      function updateButtonText(isDark) {
        darkModeToggle.innerHTML = isDark
          ? `<svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   </svg>
                   日间模式`
          : `<svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12 2V4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12 20V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M4.92993 4.92993L6.33999 6.33999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M17.6599 17.6599L19.0699 19.0699" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M2 12H4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M20 12H22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M6.33999 17.6599L4.92993 19.0699" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M19.0699 4.92993L17.6599 6.33999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   </svg>
                   夜间模式`;
      }

      // 返回顶部按钮
      const backToTopButton = document.getElementById("backToTop");

      window.addEventListener("scroll", function () {
        if (window.pageYOffset > 300) {
          backToTopButton.classList.add("visible");
        } else {
          backToTopButton.classList.remove("visible");
        }
      });

      backToTopButton.addEventListener("click", function () {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });
    </script>
      <script>
    // 检查字体加载
    document.fonts.ready.then(() => {
        const isLoaded = document.fonts.check('16px "LXGW WenKai Screen"');
        console.log('文楷字体加载:', isLoaded ? '成功' : '失败');
    });
    </script>
       <script>
const bgm = document.getElementById('bgm');
const toggleBtn = document.getElementById('toggleMusic');

// 设置音频属性以提高自动播放成功率
bgm.volume = 0.3; // 较低音量更容易被允许
bgm.preload = "auto";

let autoPlayAttempted = false;

// 更积极的自动播放策略
function attemptAutoPlay() {
    if (!autoPlayAttempted && bgm.readyState >= 3) {
        autoPlayAttempted = true;
        
        const playPromise = bgm.play();
        
        if (playPromise !== undefined) {
            playPromise.then(() => {
                console.log('自动播放成功');
                document.querySelector('.music-player').classList.add('playing');
                toggleBtn.style.display = 'block';
            }).catch(error => {
                console.log('自动播放被阻止:', error);
                // 显示播放按钮并等待用户交互
                toggleBtn.style.display = 'block';
                toggleBtn.innerHTML = '▶️ 点击播放';
                
                // 用户交互后重试播放
                const retryPlay = () => {
                    bgm.play().then(() => {
                        document.querySelector('.music-player').classList.add('playing');
                        toggleBtn.innerHTML = '<span class="play-icon">▶️</span><span class="pause-icon">⏸️</span>';
                    });
                    // 移除事件监听
                    document.removeEventListener('click', retryPlay);
                    document.removeEventListener('touchstart', retryPlay);
                };
                
                document.addEventListener('click', retryPlay);
                document.addEventListener('touchstart', retryPlay);
            });
        }
    }
}

// 多种时机尝试自动播放
bgm.addEventListener('loadeddata', attemptAutoPlay);
bgm.addEventListener('canplay', attemptAutoPlay);
bgm.addEventListener('canplaythrough', attemptAutoPlay);

// 页面加载后也尝试一次
window.addEventListener('load', () => {
    setTimeout(attemptAutoPlay, 1000);
});

// 手动播放控制
toggleBtn.addEventListener('click', function() {
    if (bgm.paused) {
        bgm.play().catch(error => {
            console.log('播放失败:', error);
            this.innerHTML = '❌ 播放失败';
        });
    } else {
        bgm.pause();
    }
});

// 播放状态更新
bgm.addEventListener('play', function() {
    document.querySelector('.music-player').classList.add('playing');
    console.log('音乐开始播放');
});

bgm.addEventListener('pause', function() {
    document.querySelector('.music-player').classList.remove('playing');
    console.log('音乐已暂停');
});

// 音频加载进度显示
bgm.addEventListener('loadstart', () => console.log('开始加载音频'));
bgm.addEventListener('progress', () => console.log('音频加载中...'));
bgm.addEventListener('loadeddata', () => console.log('音频数据已加载'));
bgm.addEventListener('canplay', () => console.log('音频可以播放'));
bgm.addEventListener('error', (e) => console.log('音频错误:', e));

// 初始显示播放按钮
toggleBtn.style.display = 'block';

</script>
  </body>
</html>















